<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ğŸ§§ æ˜¥èŠ‚ç¥ç¦è§†é¢‘æ‰¹é‡ç”Ÿæˆå™¨</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }

    @keyframes float {
      0%, 100% { transform: translateY(0) rotate(0deg); }
      50% { transform: translateY(-10px) rotate(3deg); }
    }
    @keyframes shimmer {
      0% { background-position: -200% center; }
      100% { background-position: 200% center; }
    }
    @keyframes pulse-glow {
      0%, 100% { box-shadow: 0 0 20px var(--glow-color, rgba(255, 215, 0, 0.3)); }
      50% { box-shadow: 0 0 40px var(--glow-color-strong, rgba(255, 215, 0, 0.6)); }
    }
    @keyframes spin {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }
    @keyframes fadeInUp {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    @keyframes progressPulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.6; }
    }

    /* ===== èŠ‚æ—¥ä¸»é¢˜ CSS å˜é‡ ===== */
    :root {
      /* æ˜¥èŠ‚ä¸»é¢˜ï¼ˆé»˜è®¤ï¼‰ */
      --bg-gradient: linear-gradient(135deg, #1a0000 0%, #3d0000 30%, #8b0000 60%, #5c0000 100%);
      --primary: #ffd700;
      --primary-dark: #ff8c00;
      --accent-bg: rgba(139, 0, 0, 0.6);
      --accent-bg-dark: rgba(60, 0, 0, 0.8);
      --text-main: #fff5e6;
      --text-secondary: #ffcccc;
      --text-label: #ffccaa;
      --border-color: rgba(255, 215, 0, 0.2);
      --border-color-strong: rgba(255, 215, 0, 0.3);
      --btn-text: #8b0000;
      --glow-color: rgba(255, 215, 0, 0.3);
      --glow-color-strong: rgba(255, 215, 0, 0.6);
      --particle-colors: #ffd700, #ff6b6b, #ffaa00, #ff4444, #fff5b0;
    }

    body {
      font-family: -apple-system, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", sans-serif;
      background: var(--bg-gradient);
      min-height: 100vh;
      color: var(--text-main);
      overflow-x: hidden;
      transition: background 0.6s ease;
    }

    .bg-particles {
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      pointer-events: none;
      overflow: hidden;
      z-index: 0;
    }
    .bg-particles .particle {
      position: absolute;
      border-radius: 50%;
      animation: float 6s ease-in-out infinite;
    }

    .container {
      position: relative;
      z-index: 1;
      max-width: 720px;
      margin: 0 auto;
      padding: 40px 20px 60px;
    }

    /* æ ‡é¢˜ */
    .header {
      text-align: center;
      margin-bottom: 40px;
      animation: fadeInUp 0.8s ease;
    }
    .header .lantern {
      font-size: 48px;
      animation: float 3s ease-in-out infinite;
      display: inline-block;
    }
    .header h1 {
      font-size: 34px;
      font-weight: 900;
      margin: 16px 0 8px;
      background: linear-gradient(90deg, var(--primary), var(--primary-dark), var(--primary), #fff5b0, var(--primary));
      background-size: 200% auto;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      animation: shimmer 3s linear infinite;
      transition: background 0.3s;
    }
    .header p {
      color: var(--text-secondary);
      font-size: 15px;
      opacity: 0.8;
      line-height: 1.6;
    }

    /* å¡ç‰‡ */
    .card {
      background: linear-gradient(145deg, var(--accent-bg), var(--accent-bg-dark));
      border: 1px solid var(--border-color);
      border-radius: 20px;
      padding: 28px;
      margin-bottom: 20px;
      backdrop-filter: blur(10px);
      animation: fadeInUp 0.8s ease;
      transition: background 0.4s, border-color 0.4s;
    }
    .card-title {
      font-size: 17px;
      font-weight: 700;
      color: var(--primary);
      margin-bottom: 18px;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .card-title .num {
      width: 26px;
      height: 26px;
      background: linear-gradient(135deg, var(--primary), var(--primary-dark));
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 13px;
      color: var(--btn-text);
      font-weight: 900;
      flex-shrink: 0;
    }

    /* è¾“å…¥æ¡† */
    .input-group {
      margin-bottom: 14px;
    }
    .input-group label {
      display: block;
      font-size: 13px;
      color: var(--text-label);
      margin-bottom: 6px;
      font-weight: 500;
    }
    .text-input {
      width: 100%;
      padding: 12px 16px;
      border: 1px solid var(--border-color-strong);
      border-radius: 10px;
      background: rgba(0, 0, 0, 0.3);
      color: var(--text-main);
      font-size: 16px;
      font-weight: 600;
      outline: none;
      transition: all 0.3s;
    }
    .text-input:focus {
      border-color: var(--primary);
      box-shadow: 0 0 16px var(--glow-color);
    }
    .text-input::placeholder {
      color: rgba(255, 245, 230, 0.3);
      font-weight: 400;
    }

    /* è§†é¢‘æ¨¡å¼åˆ‡æ¢ Tabs */
    .video-tabs {
      display: flex;
      gap: 0;
      margin-bottom: 14px;
      border-radius: 10px;
      overflow: hidden;
      border: 1px solid var(--border-color);
    }
    .video-tab {
      flex: 1;
      padding: 10px 0;
      text-align: center;
      font-size: 14px;
      font-weight: 700;
      cursor: pointer;
      transition: all 0.3s;
      background: rgba(0, 0, 0, 0.2);
      color: var(--text-label);
      border: none;
      outline: none;
    }
    .video-tab:not(:last-child) {
      border-right: 1px solid var(--border-color);
    }
    .video-tab.active {
      background: linear-gradient(135deg, rgba(255, 215, 0, 0.2), rgba(255, 140, 0, 0.15));
      color: var(--primary);
    }
    .video-tab:hover:not(.active) {
      background: rgba(255, 215, 0, 0.06);
    }
    .video-panel { display: none; }
    .video-panel.active { display: block; }

    /* è§†é¢‘ä¸Šä¼  */
    .upload-area {
      border: 2px dashed var(--border-color-strong);
      border-radius: 14px;
      padding: 32px 20px;
      text-align: center;
      cursor: pointer;
      transition: all 0.3s;
      background: rgba(0, 0, 0, 0.15);
    }
    .upload-area:hover {
      border-color: var(--primary);
      background: rgba(255, 215, 0, 0.05);
    }
    .upload-area.has-file {
      border-color: #4caf50;
      background: rgba(76, 175, 80, 0.1);
    }
    .upload-area .upload-icon { font-size: 42px; margin-bottom: 10px; }
    .upload-area .upload-text { font-size: 15px; color: var(--text-label); margin-bottom: 6px; }
    .upload-area .upload-hint { font-size: 12px; color: rgba(255, 204, 170, 0.5); }
    .upload-area .file-name { font-size: 13px; color: #4caf50; font-weight: 600; margin-top: 6px; }
    .upload-area input[type="file"] { display: none; }
    .upload-area video {
      max-width: 100%;
      max-height: 180px;
      border-radius: 8px;
      margin-top: 10px;
    }

    /* è§†é¢‘å½•åˆ¶ */
    .record-area {
      border: 2px solid var(--border-color);
      border-radius: 14px;
      overflow: hidden;
      background: rgba(0, 0, 0, 0.3);
    }
    .record-preview {
      position: relative;
      width: 100%;
      aspect-ratio: 9 / 16;
      max-height: 360px;
      background: #000;
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: hidden;
    }
    .record-preview video {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
    .record-preview .placeholder {
      text-align: center;
      color: rgba(255, 245, 230, 0.4);
    }
    .record-preview .placeholder .cam-icon { font-size: 48px; margin-bottom: 10px; }
    .record-preview .placeholder p { font-size: 13px; }
    .record-timer {
      position: absolute;
      top: 12px;
      right: 12px;
      background: rgba(0, 0, 0, 0.65);
      color: #ff4444;
      font-size: 14px;
      font-weight: 700;
      padding: 4px 10px;
      border-radius: 8px;
      display: none;
      align-items: center;
      gap: 6px;
      font-variant-numeric: tabular-nums;
    }
    .record-timer.active { display: flex; }
    .record-timer .rec-dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: #ff4444;
      animation: progressPulse 1s ease-in-out infinite;
    }
    .record-controls {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 16px;
      padding: 16px;
    }
    .btn-record {
      width: 56px;
      height: 56px;
      border-radius: 50%;
      border: 3px solid var(--text-main);
      background: transparent;
      cursor: pointer;
      position: relative;
      transition: all 0.3s;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .btn-record:hover { border-color: var(--primary); }
    .btn-record .inner {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: #ff4444;
      transition: all 0.25s;
    }
    .btn-record.recording .inner {
      width: 22px;
      height: 22px;
      border-radius: 6px;
      background: #ff4444;
    }
    .btn-record-action {
      padding: 8px 18px;
      border-radius: 10px;
      font-size: 13px;
      font-weight: 700;
      cursor: pointer;
      transition: all 0.3s;
      border: 1px solid var(--border-color-strong);
      background: rgba(0, 0, 0, 0.2);
      color: var(--primary);
    }
    .btn-record-action:hover {
      background: rgba(255, 215, 0, 0.1);
      border-color: var(--primary);
    }
    .record-done-bar {
      display: none;
      align-items: center;
      justify-content: center;
      gap: 12px;
      padding: 14px;
      background: rgba(76, 175, 80, 0.08);
      border-top: 1px solid rgba(76, 175, 80, 0.2);
    }
    .record-done-bar.active { display: flex; }
    .record-done-bar .done-text { font-size: 13px; color: #4caf50; font-weight: 600; }

    /* TTS å¼€å…³ */
    .tts-option {
      display: flex;
      align-items: center;
      gap: 14px;
      padding: 14px 18px;
      background: rgba(0, 0, 0, 0.2);
      border-radius: 12px;
      cursor: pointer;
      transition: all 0.3s;
      user-select: none;
    }
    .tts-option:hover { background: rgba(255, 215, 0, 0.06); }
    .tts-option.active {
      background: rgba(255, 215, 0, 0.1);
      border: 1px solid var(--border-color-strong);
    }
    .tts-switch {
      position: relative;
      width: 48px;
      height: 26px;
      flex-shrink: 0;
    }
    .tts-switch input { display: none; }
    .tts-switch .slider {
      position: absolute;
      top: 0; left: 0; right: 0; bottom: 0;
      background: rgba(255, 255, 255, 0.15);
      border-radius: 26px;
      transition: all 0.3s;
      cursor: pointer;
    }
    .tts-switch .slider::before {
      content: "";
      position: absolute;
      width: 20px;
      height: 20px;
      left: 3px;
      bottom: 3px;
      background: #fff5e6;
      border-radius: 50%;
      transition: all 0.3s;
    }
    .tts-switch input:checked + .slider {
      background: linear-gradient(135deg, var(--primary), var(--primary-dark));
    }
    .tts-switch input:checked + .slider::before {
      transform: translateX(22px);
    }
    .tts-info { flex: 1; }
    .tts-info .tts-title { font-size: 14px; font-weight: 700; color: var(--text-main); margin-bottom: 3px; }
    .tts-info .tts-desc { font-size: 11px; color: var(--text-label); opacity: 0.6; line-height: 1.5; }
    .tts-badge {
      display: inline-block;
      padding: 2px 8px;
      border-radius: 6px;
      font-size: 10px;
      font-weight: 700;
      background: linear-gradient(135deg, var(--primary), var(--primary-dark));
      color: var(--btn-text);
      margin-left: 6px;
      vertical-align: middle;
    }

    /* éŸ³é¢‘å½•åˆ¶ï¼ˆå¯é€‰ï¼‰ */
    .audio-record-toggle {
      display: flex;
      align-items: center;
      gap: 14px;
      padding: 14px 18px;
      background: rgba(0, 0, 0, 0.2);
      border-radius: 12px;
      cursor: pointer;
      transition: all 0.3s;
      user-select: none;
    }
    .audio-record-toggle:hover { background: rgba(255, 215, 0, 0.06); }
    .audio-record-toggle.active {
      background: rgba(255, 215, 0, 0.1);
      border: 1px solid var(--border-color-strong);
    }
    .audio-record-panel {
      display: none;
      margin-top: 14px;
      animation: fadeInUp 0.3s ease;
    }
    .audio-record-panel.active { display: block; }
    .audio-record-area {
      border: 2px solid var(--border-color);
      border-radius: 14px;
      overflow: hidden;
      background: rgba(0, 0, 0, 0.3);
    }
    .audio-record-visualizer {
      position: relative;
      width: 100%;
      height: 100px;
      background: rgba(0, 0, 0, 0.4);
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: hidden;
    }
    .audio-record-visualizer .placeholder-audio {
      text-align: center;
      color: rgba(255, 245, 230, 0.4);
    }
    .audio-record-visualizer .placeholder-audio .mic-icon { font-size: 36px; margin-bottom: 6px; }
    .audio-record-visualizer .placeholder-audio p { font-size: 12px; }
    .audio-wave-bars {
      display: none;
      align-items: center;
      justify-content: center;
      gap: 3px;
      height: 100%;
    }
    .audio-wave-bars.active { display: flex; }
    .audio-wave-bar {
      width: 4px;
      border-radius: 2px;
      background: var(--primary);
      transition: height 0.1s ease;
      height: 10px;
    }
    .audio-timer {
      position: absolute;
      top: 8px;
      right: 10px;
      background: rgba(0, 0, 0, 0.65);
      color: #ff4444;
      font-size: 13px;
      font-weight: 700;
      padding: 3px 8px;
      border-radius: 6px;
      display: none;
      align-items: center;
      gap: 5px;
      font-variant-numeric: tabular-nums;
    }
    .audio-timer.active { display: flex; }
    .audio-record-controls {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 14px;
      padding: 14px;
    }
    .btn-audio-record {
      width: 48px;
      height: 48px;
      border-radius: 50%;
      border: 3px solid var(--text-main);
      background: transparent;
      cursor: pointer;
      position: relative;
      transition: all 0.3s;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .btn-audio-record:hover { border-color: var(--primary); }
    .btn-audio-record .inner-audio {
      width: 34px;
      height: 34px;
      border-radius: 50%;
      background: #ff4444;
      transition: all 0.25s;
    }
    .btn-audio-record.recording .inner-audio {
      width: 18px;
      height: 18px;
      border-radius: 5px;
      background: #ff4444;
    }
    .audio-done-bar {
      display: none;
      align-items: center;
      justify-content: center;
      gap: 12px;
      padding: 12px;
      background: rgba(76, 175, 80, 0.08);
      border-top: 1px solid rgba(76, 175, 80, 0.2);
    }
    .audio-done-bar.active { display: flex; }
    .audio-done-bar .done-text { font-size: 13px; color: #4caf50; font-weight: 600; }
    .audio-playback-mini {
      width: 100%;
      max-height: 36px;
      margin-top: 8px;
    }

    /* æ”¶ä¿¡äººåˆ—è¡¨ */
    .recipient-list {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }
    .recipient-row {
      display: grid;
      grid-template-columns: 1fr 1.8fr auto;
      gap: 8px;
      align-items: end;
      padding: 14px;
      background: rgba(0, 0, 0, 0.2);
      border-radius: 12px;
      border: 1px solid var(--border-color);
      animation: fadeInUp 0.3s ease;
      position: relative;
    }
    .recipient-row .field {
      display: flex;
      flex-direction: column;
      gap: 4px;
    }
    .recipient-row .field label {
      font-size: 11px;
      color: var(--text-label);
      opacity: 0.7;
    }
    .recipient-row .field input {
      padding: 10px 12px;
      border: 1px solid var(--border-color);
      border-radius: 8px;
      background: rgba(0, 0, 0, 0.3);
      color: var(--text-main);
      font-size: 14px;
      outline: none;
      transition: all 0.3s;
      width: 100%;
    }
    .recipient-row .field input:focus {
      border-color: var(--primary);
    }
    .recipient-row .field input::placeholder {
      color: rgba(255, 245, 230, 0.25);
      font-size: 12px;
    }
    .recipient-row .row-num {
      position: absolute;
      top: -8px;
      left: 10px;
      background: linear-gradient(135deg, var(--primary), var(--primary-dark));
      color: var(--btn-text);
      font-size: 10px;
      font-weight: 900;
      width: 18px;
      height: 18px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .btn-remove {
      background: rgba(255, 60, 60, 0.2);
      border: 1px solid rgba(255, 60, 60, 0.3);
      color: #ff6b6b;
      border-radius: 8px;
      cursor: pointer;
      font-size: 18px;
      width: 38px;
      height: 38px;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s;
      flex-shrink: 0;
      margin-bottom: 1px;
    }
    .btn-remove:hover {
      background: rgba(255, 60, 60, 0.4);
      border-color: #ff4444;
    }
    .btn-add {
      width: 100%;
      padding: 12px;
      border: 2px dashed var(--border-color);
      border-radius: 12px;
      background: transparent;
      color: var(--primary);
      font-size: 14px;
      font-weight: 700;
      cursor: pointer;
      transition: all 0.3s;
      margin-top: 4px;
    }
    .btn-add:hover {
      border-color: var(--primary);
      background: rgba(255, 215, 0, 0.06);
    }
    .recipient-hint {
      font-size: 12px;
      color: var(--text-label);
      opacity: 0.5;
      margin-top: 6px;
      line-height: 1.5;
    }

    /* æäº¤æŒ‰é’® */
    .submit-btn {
      width: 100%;
      padding: 18px;
      border: none;
      border-radius: 16px;
      font-size: 20px;
      font-weight: 900;
      cursor: pointer;
      transition: all 0.3s;
      background: linear-gradient(135deg, var(--primary), var(--primary-dark));
      color: var(--btn-text);
      letter-spacing: 4px;
      animation: pulse-glow 2s ease-in-out infinite;
    }
    .submit-btn:hover:not(:disabled) {
      transform: translateY(-2px);
      box-shadow: 0 8px 30px var(--glow-color-strong);
    }
    .submit-btn:disabled {
      opacity: 0.6;
      cursor: not-allowed;
      animation: none;
    }

    /* è¿›åº¦åŒºåŸŸ */
    .progress-section {
      display: none;
      animation: fadeInUp 0.6s ease;
    }
    .progress-section.active { display: block; }
    .progress-header {
      text-align: center;
      margin-bottom: 24px;
    }
    .progress-header h3 {
      font-size: 22px;
      color: var(--primary);
      margin-bottom: 8px;
    }
    .progress-header p {
      font-size: 14px;
      color: var(--text-label);
      opacity: 0.7;
    }
    .progress-bar-container {
      width: 100%;
      height: 8px;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 4px;
      overflow: hidden;
      margin-bottom: 24px;
    }
    .progress-bar {
      height: 100%;
      background: linear-gradient(90deg, var(--primary), var(--primary-dark));
      border-radius: 4px;
      transition: width 0.5s ease;
      width: 0%;
    }
    .progress-items {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }
    .progress-item {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 14px 16px;
      background: rgba(0, 0, 0, 0.2);
      border-radius: 12px;
      border: 1px solid var(--border-color);
    }
    .progress-item .status-icon {
      width: 32px;
      height: 32px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 16px;
      flex-shrink: 0;
    }
    .progress-item .status-icon.pending {
      background: rgba(255, 255, 255, 0.08);
      color: rgba(255, 255, 255, 0.3);
    }
    .progress-item .status-icon.processing {
      background: rgba(255, 215, 0, 0.15);
      animation: progressPulse 1.2s ease-in-out infinite;
      color: var(--primary);
    }
    .progress-item .status-icon.done {
      background: rgba(76, 175, 80, 0.2);
      color: #4caf50;
    }
    .progress-item .status-icon.error {
      background: rgba(255, 60, 60, 0.2);
      color: #ff4444;
    }
    .progress-item .item-info { flex: 1; }
    .progress-item .item-name { font-size: 15px; font-weight: 700; color: var(--text-main); }
    .progress-item .item-detail { font-size: 12px; color: var(--text-label); opacity: 0.6; margin-top: 2px; }

    /* ç»“æœåŒºåŸŸ */
    .result-section {
      display: none;
      animation: fadeInUp 0.6s ease;
    }
    .result-section.active { display: block; }
    .result-header {
      text-align: center;
      margin-bottom: 24px;
    }
    .result-header h3 {
      font-size: 24px;
      color: var(--primary);
      margin-bottom: 8px;
    }
    .result-header p {
      font-size: 14px;
      color: var(--text-label);
      opacity: 0.7;
    }
    .result-actions-top {
      display: flex;
      gap: 12px;
      justify-content: center;
      margin-bottom: 24px;
      flex-wrap: wrap;
    }
    .result-items {
      display: flex;
      flex-direction: column;
      gap: 14px;
    }
    .result-item {
      display: flex;
      gap: 16px;
      padding: 16px;
      background: rgba(0, 0, 0, 0.2);
      border-radius: 14px;
      border: 1px solid var(--border-color);
      align-items: center;
    }
    .result-item video {
      width: 140px;
      aspect-ratio: 9 / 16;
      object-fit: cover;
      border-radius: 10px;
      background: #000;
      flex-shrink: 0;
    }
    .result-item .result-info {
      flex: 1;
      display: flex;
      flex-direction: column;
      gap: 8px;
    }
    .result-item .result-name {
      font-size: 18px;
      font-weight: 900;
      color: var(--primary);
    }
    .result-item .result-relation {
      font-size: 13px;
      color: var(--text-label);
      opacity: 0.7;
    }
    .result-item .result-status-error {
      font-size: 13px;
      color: #ff6b6b;
    }
    .result-item a.btn-download-single {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 8px 18px;
      background: linear-gradient(135deg, var(--primary), var(--primary-dark));
      color: var(--btn-text);
      border-radius: 10px;
      font-size: 13px;
      font-weight: 700;
      text-decoration: none;
      transition: all 0.3s;
      width: fit-content;
    }
    .result-item a.btn-download-single:hover {
      transform: translateY(-1px);
      box-shadow: 0 4px 16px var(--glow-color);
    }

    /* é€šç”¨æŒ‰é’® */
    .btn-primary {
      padding: 12px 28px;
      border-radius: 12px;
      font-size: 15px;
      font-weight: 700;
      text-decoration: none;
      cursor: pointer;
      transition: all 0.3s;
      background: linear-gradient(135deg, var(--primary), var(--primary-dark));
      color: var(--btn-text);
      border: none;
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }
    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 20px var(--glow-color);
    }
    .btn-secondary {
      padding: 12px 28px;
      border-radius: 12px;
      font-size: 15px;
      font-weight: 700;
      cursor: pointer;
      transition: all 0.3s;
      background: transparent;
      border: 2px solid var(--border-color-strong);
      color: var(--primary);
    }
    .btn-secondary:hover {
      border-color: var(--primary);
      background: rgba(255, 215, 0, 0.1);
    }

    .footer {
      text-align: center;
      margin-top: 48px;
      padding: 20px;
      color: var(--text-label);
      opacity: 0.3;
      font-size: 13px;
    }

    /* ===== å°è¯é¢„è§ˆåŒºåŸŸ ===== */
    .preview-section {
      display: none;
      animation: fadeInUp 0.6s ease;
    }
    .preview-section.active { display: block; }
    .preview-header {
      text-align: center;
      margin-bottom: 20px;
    }
    .preview-header h3 {
      font-size: 22px;
      color: var(--primary);
      margin-bottom: 8px;
    }
    .preview-header p {
      font-size: 14px;
      color: var(--text-label);
      opacity: 0.7;
      line-height: 1.6;
    }
    .preview-countdown {
      text-align: center;
      margin-bottom: 20px;
    }
    .preview-countdown .countdown-bar {
      width: 100%;
      height: 6px;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 3px;
      overflow: hidden;
      margin-bottom: 10px;
    }
    .preview-countdown .countdown-fill {
      height: 100%;
      background: linear-gradient(90deg, var(--primary), var(--primary-dark));
      border-radius: 3px;
      transition: width 0.3s linear;
      width: 100%;
    }
    .preview-countdown .countdown-text {
      font-size: 13px;
      color: var(--text-label);
      opacity: 0.7;
    }
    .preview-countdown .countdown-text .countdown-num {
      font-weight: 900;
      color: var(--primary);
      font-size: 15px;
      font-variant-numeric: tabular-nums;
    }
    .preview-items {
      display: flex;
      flex-direction: column;
      gap: 16px;
      margin-bottom: 20px;
    }
    .preview-card {
      background: rgba(0, 0, 0, 0.25);
      border: 1px solid var(--border-color);
      border-radius: 14px;
      padding: 18px;
      animation: fadeInUp 0.4s ease;
      transition: border-color 0.3s;
    }
    .preview-card:hover {
      border-color: var(--border-color-strong);
    }
    .preview-card-header {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 14px;
    }
    .preview-card-header .preview-avatar {
      width: 36px;
      height: 36px;
      border-radius: 50%;
      background: linear-gradient(135deg, var(--primary), var(--primary-dark));
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 14px;
      font-weight: 900;
      color: var(--btn-text);
      flex-shrink: 0;
    }
    .preview-card-header .preview-name {
      font-size: 16px;
      font-weight: 800;
      color: var(--primary);
    }
    .preview-card-header .preview-relation {
      font-size: 12px;
      color: var(--text-label);
      opacity: 0.6;
    }
    .preview-card-header .preview-theme-badge {
      margin-left: auto;
      padding: 3px 10px;
      border-radius: 8px;
      font-size: 11px;
      font-weight: 700;
      background: rgba(255, 255, 255, 0.08);
      color: var(--text-label);
      border: 1px solid var(--border-color);
    }
    .preview-field {
      margin-bottom: 12px;
    }
    .preview-field:last-child {
      margin-bottom: 0;
    }
    .preview-field-label {
      font-size: 11px;
      color: var(--text-label);
      opacity: 0.6;
      margin-bottom: 4px;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 4px;
    }
    .preview-field-value {
      width: 100%;
      padding: 10px 12px;
      border: 1px solid var(--border-color);
      border-radius: 8px;
      background: rgba(0, 0, 0, 0.2);
      color: var(--text-main);
      font-size: 14px;
      line-height: 1.6;
      outline: none;
      transition: all 0.3s;
      resize: vertical;
      min-height: 38px;
      font-family: inherit;
    }
    .preview-field-value:focus {
      border-color: var(--primary);
      box-shadow: 0 0 12px var(--glow-color);
    }
    .preview-field-value.readonly {
      opacity: 0.7;
      cursor: default;
    }
    .preview-blessings-row {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
    }
    .preview-blessing-tag {
      padding: 6px 12px;
      border: 1px solid var(--border-color);
      border-radius: 8px;
      background: rgba(0, 0, 0, 0.2);
      color: var(--text-main);
      font-size: 13px;
      outline: none;
      transition: all 0.3s;
      min-width: 60px;
      text-align: center;
      font-family: inherit;
    }
    .preview-blessing-tag:focus {
      border-color: var(--primary);
      box-shadow: 0 0 8px var(--glow-color);
    }
    .preview-actions {
      display: flex;
      gap: 12px;
      justify-content: center;
      flex-wrap: wrap;
    }
    .preview-actions .btn-confirm {
      padding: 16px 40px;
      border: none;
      border-radius: 14px;
      font-size: 18px;
      font-weight: 900;
      cursor: pointer;
      transition: all 0.3s;
      background: linear-gradient(135deg, var(--primary), var(--primary-dark));
      color: var(--btn-text);
      letter-spacing: 2px;
      animation: pulse-glow 2s ease-in-out infinite;
    }
    .preview-actions .btn-confirm:hover:not(:disabled) {
      transform: translateY(-2px);
      box-shadow: 0 8px 30px var(--glow-color-strong);
    }
    .preview-actions .btn-confirm:disabled {
      opacity: 0.6;
      cursor: not-allowed;
      animation: none;
    }
    .preview-actions .btn-back {
      padding: 16px 28px;
      border-radius: 14px;
      font-size: 16px;
      font-weight: 700;
      cursor: pointer;
      transition: all 0.3s;
      background: transparent;
      border: 2px solid var(--border-color-strong);
      color: var(--primary);
    }
    .preview-actions .btn-back:hover {
      border-color: var(--primary);
      background: rgba(255, 215, 0, 0.1);
    }
    .preview-edit-hint {
      text-align: center;
      font-size: 12px;
      color: var(--text-label);
      opacity: 0.5;
      margin-top: 12px;
      line-height: 1.5;
    }

    /* å“åº”å¼ */
    @media (max-width: 600px) {
      .recipient-row {
        grid-template-columns: 1fr;
        gap: 8px;
      }
      .btn-remove {
        position: absolute;
        top: 6px;
        right: 6px;
        width: 28px;
        height: 28px;
        font-size: 14px;
      }
      .result-item {
        flex-direction: column;
        align-items: stretch;
      }
      .result-item video {
        width: 100%;
        max-width: 240px;
        aspect-ratio: 9 / 16;
        margin: 0 auto;
      }
    }
  </style>
</head>
<body>

<div class="bg-particles" id="particles"></div>

<div class="container">
  <!-- æ ‡é¢˜ -->
  <div class="header">
    <div class="lantern" id="headerEmoji">ğŸ®</div>
    <h1 id="headerTitle">æ˜¥èŠ‚ç¥ç¦è§†é¢‘æ‰¹é‡ç”Ÿæˆ</h1>
    <p id="headerDesc">
      ä¸Šä¼ æˆ–ç°åœºå½•åˆ¶æçŸ­ç¤ºä¾‹ç¥ç¦ï¼Œè¾“å…¥æœ‹å‹åˆ—è¡¨ï¼Œä¸ºæ¯ä¸ªäººç”Ÿæˆä¸“å±ç¥ç¦è§†é¢‘
    </p>
  </div>

  <!-- ===== è¡¨å•åŒºåŸŸ ===== -->
  <div id="formSection">
    <!-- Step 1: æ‚¨çš„ä¿¡æ¯ + è§†é¢‘ -->
    <div class="card" style="animation-delay: 0.05s">
      <div class="input-group">
        <label>æ‚¨çš„åå­—ï¼ˆæ˜¾ç¤ºåœ¨æ¯ä¸ªè§†é¢‘çš„ç»“å°¾ç½²åï¼‰</label>
        <input type="text" class="text-input" id="senderNameInput" placeholder="ä¾‹å¦‚ï¼šå°æ˜" maxlength="20">
      </div>
      <div style="margin-top: 16px;">
        <label id="videoLabel" style="display:block; font-size:13px; color:var(--text-label); margin-bottom:8px; font-weight:500;">
          æä¾›ä¸€æ®µç¥ç¦è§†é¢‘ï¼ˆå½•ä¸€å¥é€šç”¨çš„æ–°å¹´ç¥ç¦è¯­ï¼Œ3-10ç§’ï¼‰
        </label>
        <div class="video-tabs">
          <button class="video-tab" onclick="window.__app.switchVideoMode('upload')">ğŸ“ ä¸Šä¼ è§†é¢‘</button>
          <button class="video-tab active" onclick="window.__app.switchVideoMode('record')">ğŸ“¹ ç°åœºå½•åˆ¶</button>
        </div>

        <!-- ä¸Šä¼ é¢æ¿ -->
        <div class="video-panel" id="panelUpload">
          <div class="upload-area" id="uploadArea" onclick="document.getElementById('videoInput').click()">
            <div class="upload-icon">ğŸ¥</div>
            <div class="upload-text">ç‚¹å‡»ä¸Šä¼ æˆ–æ‹–æ‹½è§†é¢‘åˆ°æ­¤å¤„</div>
            <div class="upload-hint">æ”¯æŒ MP4 æ ¼å¼ï¼Œ3-10ç§’ï¼Œæœ€å¤§ 50MB Â· è§†é¢‘ä¸­è¯·åŒ…å«ä½ çš„è¯´è¯å£°éŸ³</div>
            <input type="file" id="videoInput" accept="video/mp4,video/*">
          </div>
        </div>

        <!-- å½•åˆ¶é¢æ¿ -->
        <div class="video-panel active" id="panelRecord">
          <div class="record-area" id="recordArea">
            <div class="record-preview" id="recordPreview">
              <div class="placeholder" id="recordPlaceholder">
                <div class="cam-icon">ğŸ“·</div>
                <p>ç‚¹å‡»ä¸‹æ–¹æŒ‰é’®å¼€å¯æ‘„åƒå¤´</p>
              </div>
              <video id="cameraFeed" autoplay muted playsinline style="display:none;"></video>
              <video id="recordPlayback" controls playsinline style="display:none;"></video>
              <div class="record-timer" id="recordTimer">
                <span class="rec-dot"></span>
                <span id="recordTimerText">00:00</span>
              </div>
            </div>
            <div class="record-controls" id="recordControls">
              <button class="btn-record-action" id="btnOpenCamera" onclick="window.__app.openCamera()">ğŸ¥ å¼€å¯æ‘„åƒå¤´</button>
              <button class="btn-record" id="btnRecord" onclick="window.__app.toggleRecording()" style="display:none;" title="å¼€å§‹å½•åˆ¶">
                <div class="inner"></div>
              </button>
            </div>
            <div class="record-done-bar" id="recordDoneBar">
              <span class="done-text" id="recordDoneText">âœ… å½•åˆ¶å®Œæˆ</span>
              <button class="btn-record-action" onclick="window.__app.retakeRecording()">ğŸ”„ é‡æ–°å½•åˆ¶</button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- å¯é€‰ï¼šéŸ³é¢‘å½•åˆ¶ï¼ˆç”¨äºå£°éŸ³å…‹éš†ï¼‰ï¼Œé»˜è®¤éšè—ï¼Œç”±å¤–éƒ¨é€»è¾‘æ§åˆ¶æ˜¾ç¤º -->
    <div class="card" id="audioRecordCard" style="animation-delay: 0.08s; display: none;">
      <div class="audio-record-toggle" id="audioToggle" onclick="window.__app.toggleAudioRecord()">
        <div class="tts-switch">
          <input type="checkbox" id="audioRecordSwitch">
          <label class="slider" for="audioRecordSwitch"></label>
        </div>
        <div class="tts-info">
          <div class="tts-title">ğŸ™ï¸ å½•åˆ¶å£°éŸ³æ ·æœ¬ï¼ˆå¯é€‰ï¼‰<span class="tts-badge">æ¨è</span></div>
          <div class="tts-desc">å•ç‹¬å½•ä¸€æ®µä½ çš„è¯´è¯å£°éŸ³ï¼ŒAI å°†ç”¨å®ƒæ¥å…‹éš†ä½ çš„éŸ³è‰²ç”Ÿæˆé…éŸ³ã€‚ä¸å½•ä¹Ÿè¡Œï¼Œä¼šä»è§†é¢‘ä¸­è‡ªåŠ¨æå–ã€‚</div>
        </div>
      </div>
      <div class="audio-record-panel" id="audioRecordPanel">
        <div class="audio-record-area" id="audioRecordArea">
          <div class="audio-record-visualizer" id="audioVisualizer">
            <div class="placeholder-audio" id="audioPlaceholder">
              <div class="mic-icon">ğŸ™ï¸</div>
              <p>ç‚¹å‡»ä¸‹æ–¹æŒ‰é’®å¼€å§‹å½•éŸ³</p>
            </div>
            <div class="audio-wave-bars" id="audioWaveBars">
              <!-- JS will generate bars -->
            </div>
            <audio id="audioPlayback" controls style="display:none; width:90%; position:absolute; bottom:8px;"></audio>
            <div class="audio-timer" id="audioTimer">
              <span class="rec-dot"></span>
              <span id="audioTimerText">00:00</span>
            </div>
          </div>
          <div class="audio-record-controls" id="audioRecordControls">
            <button class="btn-audio-record" id="btnAudioRecord" onclick="window.__app.toggleAudioRecording()" title="å¼€å§‹å½•éŸ³">
              <div class="inner-audio"></div>
            </button>
          </div>
          <div class="audio-done-bar" id="audioDoneBar">
            <span class="done-text" id="audioDoneText">âœ… å½•éŸ³å®Œæˆ</span>
            <button class="btn-record-action" onclick="window.__app.retakeAudioRecording()">ğŸ”„ é‡æ–°å½•éŸ³</button>
          </div>
        </div>
        <div style="font-size: 11px; color: var(--text-label); opacity: 0.5; margin-top: 8px; line-height: 1.5; text-align: center;">
          ğŸ’¡ å»ºè®®å½•åˆ¶ 5-15 ç§’ï¼Œéšä¾¿è¯´å‡ å¥è¯å°±è¡Œã€‚å£°éŸ³è¶Šæ¸…æ™°ï¼Œå…‹éš†æ•ˆæœè¶Šå¥½ã€‚
        </div>
      </div>
    </div>

    <!-- Step 2: ç¥ç¦å¯¹è±¡åˆ—è¡¨ -->
    <div class="card" style="animation-delay: 0.1s">
      <div class="card-title">
        <span class="num">2</span>
        æ·»åŠ ç¥ç¦å¯¹è±¡
      </div>
      <div class="recipient-list" id="recipientList">
        <!-- JS åŠ¨æ€ç”Ÿæˆ -->
      </div>
      <button class="btn-add" onclick="window.__app.addRecipient()">+ æ·»åŠ ä¸€ä½ç¥ç¦å¯¹è±¡</button>
      <div class="recipient-hint" id="recipientHint">
        ğŸ’¡ åœ¨ã€Œå…³ç³»ä¸èƒŒæ™¯ã€ä¸­å¡«å†™å…³ç³»å’ŒèƒŒæ™¯ä¿¡æ¯ï¼Œç”¨é€—å·åˆ†éš”<br>
        ğŸ’¡ ä¾‹å¦‚ï¼šå‘å°ï¼Œåˆšå‡èŒ / å¦ˆå¦ˆï¼Œèº«ä½“å¥åº· / é¢†å¯¼ï¼Œäº‹ä¸šå·…å³°<br>
        ğŸ¨ AI ä¼šæ ¹æ®å¯¹æ–¹èº«ä»½è‡ªåŠ¨é€‰æ‹©æœ€åŒ¹é…çš„è§†é¢‘é£æ ¼
      </div>
    </div>

    <!-- æäº¤ -->
    <button class="submit-btn" id="submitBtn" onclick="window.__app.handleSubmit()">
      <span id="submitBtnText">ğŸ§§ ä¸€é”®ç”Ÿæˆå…¨éƒ¨ç¥ç¦è§†é¢‘</span>
    </button>
  </div>

  <!-- ===== å°è¯é¢„è§ˆåŒºåŸŸ ===== -->
  <div class="preview-section" id="previewSection">
    <div class="card">
      <div class="preview-header">
        <h3 id="previewTitle">ğŸ“ å°è¯é¢„è§ˆ</h3>
        <p>AI å·²ä¸ºæ¯ä½æ”¶ä¿¡äººç”Ÿæˆä¸ªæ€§åŒ–å°è¯ï¼Œè¯·æ£€æŸ¥ç¡®è®¤ã€‚å¯ç›´æ¥ç¼–è¾‘ä¿®æ”¹ã€‚</p>
      </div>
      <div class="preview-countdown" id="previewCountdown">
        <div class="countdown-bar">
          <div class="countdown-fill" id="countdownFill"></div>
        </div>
        <div class="countdown-text">
          <span class="countdown-num" id="countdownNum"></span> ç§’åè‡ªåŠ¨å¼€å§‹åˆ¶ä½œè§†é¢‘
        </div>
      </div>
      <div class="preview-items" id="previewItems">
        <!-- JS åŠ¨æ€ç”Ÿæˆ -->
      </div>
      <div class="preview-actions">
        <button class="btn-back" onclick="window.__app.backToForm()">â† è¿”å›ä¿®æ”¹</button>
        <button class="btn-confirm" id="btnConfirm" onclick="window.__app.confirmAndRender()">
          âœ¨ ç¡®è®¤å°è¯ï¼Œå¼€å§‹åˆ¶ä½œ
        </button>
      </div>
      <div class="preview-edit-hint">
        ğŸ’¡ ç‚¹å‡»ä»»æ„æ–‡å­—å¯ç›´æ¥ç¼–è¾‘ Â· ç¼–è¾‘æ—¶å€’è®¡æ—¶è‡ªåŠ¨æš‚åœ
      </div>
    </div>
  </div>

  <!-- ===== è¿›åº¦åŒºåŸŸ ===== -->
  <div class="progress-section" id="progressSection">
    <div class="card">
      <div class="progress-header">
        <h3 id="progressTitle">ğŸ¬ æ­£åœ¨ç”Ÿæˆç¥ç¦è§†é¢‘...</h3>
        <p id="progressSub">è¯·è€å¿ƒç­‰å¾…ï¼Œæ¯ä¸ªè§†é¢‘çº¦éœ€ 30-60 ç§’</p>
      </div>
      <div class="progress-bar-container">
        <div class="progress-bar" id="progressBar"></div>
      </div>
      <div class="progress-items" id="progressItems">
        <!-- JS åŠ¨æ€ç”Ÿæˆ -->
      </div>
    </div>
  </div>

  <!-- ===== ç»“æœåŒºåŸŸ ===== -->
  <div class="result-section" id="resultSection">
    <div class="result-header">
      <h3>ğŸ‰ ç¥ç¦è§†é¢‘ç”Ÿæˆå®Œæˆï¼</h3>
      <p id="resultSummary"></p>
    </div>
    <div class="result-actions-top">
      <button class="btn-primary" id="downloadAllBtn" onclick="window.__app.downloadAll()">ğŸ“¦ æ‰“åŒ…ä¸‹è½½å…¨éƒ¨</button>
      <button class="btn-secondary" onclick="window.__app.resetForm()">ğŸ”„ å†åšä¸€æ‰¹</button>
    </div>
    <div class="result-items" id="resultItems">
      <!-- JS åŠ¨æ€ç”Ÿæˆ -->
    </div>
  </div>

  <div class="footer" id="pageFooter">
    ğŸ§§ 2026 ä¸™åˆé©¬å¹´ Â· æ–°æ˜¥å¿«ä¹ ğŸ§§
  </div>
</div>

<script type="module" src="js/app.js"></script>
</body>
</html>
